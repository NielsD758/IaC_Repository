---
- name: Voorbeeld playbook met block en handlers
  hosts: webservers
  become: true

  tasks:
    - name: Nginx installeren en configureren
      block:
        - name: Installeer Nginx
          apt:
            name: nginx
            state: present
          notify: Restart Nginx

        - name: Plaats configuratiebestand
          template:
            src: nginx.conf.j2
            dest: /etc/nginx/nginx.conf
          notify: Restart Nginx
      rescue:
        - name: Log foutmelding
          debug:
            msg: "Installatie of configuratie is mislukt!"

  handlers:
    - name: Restart Nginx
      service:
        name: nginx
        state: restarted
